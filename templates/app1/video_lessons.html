{% extends 'base.html' %}
{% load i18n %}
{% block content %}
<style>
  .video_container {
    width: 100%;
    height: auto;
  }
  .video_header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 40px 0;
  }
  .info_video {
    width: 100%;
    height: auto;
    backdrop-filter: blur(10px);
    background-color: rgba(255, 255, 255, 0.511);
    border-radius: 10px;
    border: 0.1px solid white;
  }
  .box_video {
    width: 100%;
    height: auto;
    backdrop-filter: blur(10px);
    background-color: rgba(255, 255, 255, 0.511);
    border-radius: 10px 10px 0 0;
  }
  .box_video::before {
    display: block;
    padding-top: var(--bs-aspect-ratio);
    content: "";
  }
  .box_video > * {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 10px 10px 0 0;
  }

  .box_video {
    --bs-aspect-ratio: 56.25%; /* 9 รท 16 = 0.5625 */
  }
  .box_info_video {
    padding: 10px;
    width: 100%;
    height: auto;
  }
</style>
<div class="video_container">
  <!-- Sarlavha va admin tugmasi -->
  <div class="video_header">
    <div>
      <h1 class="display-5 fw-bold">{% trans "Video Darslar" %}</h1>
      <p class="text-muted">
        {% trans "YouTube platformasidagi tushunarli va sifatli video darslar" %}
      </p>
    </div>
    {% if user.is_staff %}
    <div>
      <a href="{% url 'add_video' %}" class="btn btn-success me-2">
        <i class="fas fa-plus-circle me-1"></i> {% trans "Yangi Video Qo'shish" %}
      </a>
    </div>
    {% endif %}
  </div>

  <!-- Video darslar ro'yxati -->
  {% if videos %}
  <div class="row g-4">
    {% for video in videos %}
    <div class="col-md-6 col-lg-4">
      <div class="info_video">
        <div class="box_video">{{ video.iframe_code|safe }}</div>
        <div class="box_info_video">
          <h6>{{ video.title }}</h6>
          {% if video.description %}
          <p class="card-text text-truncate small mb-1">
            {{ video.description }}
          </p>
          {% endif %}
          <p class="text-muted small text-end mb-0">
            {{ video.uploaded_at|date:"d M Y" }}
          </p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info">{% trans "Hozircha video darslar mavjud emas." %}</div>
  {% endif %}

  <!-- Admin uchun qo'shimcha ma'lumot -->
  {% if user.is_staff and not videos %}
  <div class="card mt-4 border-warning">
    <div class="card-header bg-warning text-dark">
      <h5 class="mb-0">
        <i class="fas fa-info-circle me-2"></i>{% trans "Admin uchun ma'lumot" %}
      </h5>
    </div>
    <div class="card-body">
      <p>
        {% trans "Hozircha video darslar mavjud emas. Yangi video qo'shish uchun tugmani bosing:" %}
      </p>
      <a href="{% url 'add_video' %}" class="btn btn-success">
        <i class="fas fa-plus me-1"></i> {% trans "Yangi Video Qo'shish" %}
      </a>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
